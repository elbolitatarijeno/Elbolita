<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Calendar with Notes</title
     <link rel="icon" href="/Bandy" type="image/x-icon">                                                
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        h1 {
            margin: 10px;
        }
        .navigation {
            margin: 20px;
        }
        .date-display {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        table {
            border-collapse: collapse;
            margin: auto;
            width: 90%;
        }
        th, td {
            border: 1px solid #aaa;
            padding: 10px;
            width: 12%;
            height: 100px; /* Increased height for text area */
            text-align: center;
            vertical-align: top;
        }
        th {
            background-color: #f2f2f2;
        }
        td {
            position: relative;
        }
        .today {
            background-color: #ffeb3b;
        }
        textarea {
            width: 95%;
            height: 60px;
            resize: none;
            margin-top: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Monthly Calendar with Notes</h1>
    <div class="navigation">
        <button onclick="changeMonth(-1)">Previous Month</button>
        <button onclick="goToToday()">Back to Today</button>
        <button onclick="changeMonth(1)">Next Month</button>
        <button onclick="Corregido.html">Correct</button>
    </div>
    <div id="dateDisplay" class="date-display"></div>
    <table id="calendarTable"></table>

    <script>
        let currentYear = new Date().getFullYear();
        let currentMonth = new Date().getMonth() + 1;
        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
        const daysOfWeek = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
        const notes = JSON.parse(localStorage.getItem("calendarNotes")) || {}; // Save notes locally

        function zellersCongruence(day, month, year) {
            if (month < 3) {
                month += 12;
                year -= 1;
            }
            const K = year % 100;
            const J = Math.floor(year / 100);
            const h = (day + Math.floor(13 * (month + 1) / 5) + K + Math.floor(K / 4) + Math.floor(J / 4) - 2 * J) % 7;
            return h;
        }

        function updateDateDisplay(year, month) {
            const dateDisplay = document.getElementById("dateDisplay");
            dateDisplay.textContent = `${monthNames[month - 1]} ${year}`;
        }

        function generateMonthCalendar(year, month) {
            updateDateDisplay(year, month); // Update the date display
            const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            if ((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0)) {
                daysInMonth[1] = 29; // Leap year adjustment
            }
            const totalDays = daysInMonth[month - 1];

            const table = document.getElementById("calendarTable");
            table.innerHTML = ""; // Clear the calendar

            // Create table header
            const headerRow = document.createElement("tr");
            daysOfWeek.forEach(day => {
                const th = document.createElement("th");
                th.textContent = day;
                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            let row = document.createElement("tr");
            const firstDayIndex = (zellersCongruence(1, month, year) + 7) % 7;

            for (let i = 0; i < firstDayIndex; i++) {
                const emptyCell = document.createElement("td");
                row.appendChild(emptyCell);
            }

            for (let day = 1; day <= totalDays; day++) {
                const cell = document.createElement("td");
                const today = new Date();
                const isToday = (day === today.getDate() && month === today.getMonth() + 1 && year === today.getFullYear());
                if (isToday) {
                    cell.classList.add("today");
                }

                cell.innerHTML = `<div>${day}</div>`;
                const noteKey = `${year}-${month}-${day}`;

                const textArea = document.createElement("textarea");
                textArea.value = notes[noteKey] || "";
                textArea.oninput = () => saveNote(noteKey, textArea.value);

                cell.appendChild(textArea);
                row.appendChild(cell);

                if ((firstDayIndex + day) % 7 === 0) {
                    table.appendChild(row);
                    row = document.createElement("tr");
                }
            }

            if (row.children.length > 0) {
                table.appendChild(row);
            }
        }

        function changeMonth(change) {
            currentMonth += change;
            if (currentMonth > 12) {
                currentMonth = 1;
                currentYear += 1;
            } else if (currentMonth < 1) {
                currentMonth = 12;
                currentYear -= 1;
            }
            generateMonthCalendar(currentYear, currentMonth);
        }

        function saveNote(noteKey, value) {
            notes[noteKey] = value;
            localStorage.setItem("calendarNotes", JSON.stringify(notes)); // Save notes to localStorage
        }

        function goToToday() {
            currentYear = new Date().getFullYear();
            currentMonth = new Date().getMonth() + 1;
            generateMonthCalendar(currentYear, currentMonth);
        }

        generateMonthCalendar(currentYear, currentMonth);
    </script>
</body>
</html>
